<!DOCTYPE html>
<html lang="en" ng-app="myApp">

<head x-import="head.html"></head>

<body>
    <nav class="navbar ##session.lang## " x-import="navbar.html" ng-controller="navbar"></nav>
    <div x-permission="login">
        <div id="testModal" class="modal" ng-controller="add-channel">
            <div class="modal-content">
                <div class="modal-header">
                    <span class="close">&times;</span>
                    <h2 class="center"> ##word.youtube_add_Channel## </h2>
                </div>

                <div class="modal-body">
                    <form class="form">
                        <div class="control">
                            <label>##word.youtube_channel_name##</label>
                            <input type="text" ng-model="name">
                        </div>
                        
                    </form>
                </div>

                <div class="modal-footer center">
                    <a class="btn bg-red" onclick="site.hideModal('#testModal')">##word.youtube_close_modal##</a>
                    <a class="btn" ng-click="addChannel()">##word.youtube_add_Channel##</a>
                </div>
            </div>
        </div>

        <a class="btn bg-blue" onclick="site.showModal('#testModal')">##word.youtube_add_Channel##</a>
        <table class="table">
            <tr>
                <th>##word.youtube_channel_name## </th>
                <th> </th>
            </tr>
        </table>
    </div>

</body>
<div x-import="scripts.html"></div>
<script>
        var app = app || angular.module('myApp', [])
        app.controller('add-channel', ($scope, $http) => {
            $scope.name = ''
            $scope.addChannel = function () {
                $http({
                    method: 'POST',
                    url: '/api/youtube/addchannel',
                    data: {
                        channelName:$scope.name
                    }
                }).then(function (response) {
                    if(response.data.done){
                        window.location.reload(true)
                    }
                });
            };
        })
    </script>

</html>